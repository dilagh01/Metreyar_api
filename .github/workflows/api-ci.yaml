name: Create Project Structure with Empty Files

on:
  workflow_dispatch:
  push:
    branches: [main]
    paths:
      - '.github/workflows/create-structure.yml'

jobs:
  create-structure:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
      with:
        fetch-depth: 0
      
    - name: Create complete project structure
      run: |
        echo "📁 ایجاد ساختار دایرکتوری‌ها..."

        # دایرکتوری‌های backend و app
        mkdir -p backend/app/{api/v1,models,schemas,database,core,services}
        mkdir -p backend/tests

        # دایرکتوری‌های دیگر پروژه
        mkdir -p data/migrations
        mkdir -p scripts
        mkdir -p docs

        # ایجاد __init__.py در پکیج‌ها
        for dir in backend backend/app backend/app/api backend/app/api/v1 \
                 backend/app/models backend/app/schemas backend/app/database \
                 backend/app/core backend/app/services backend/tests; do
          touch "$dir/__init__.py"
        done

        # ایجاد فایل‌های اصلی خالی
        touch backend/app/main.py
        touch backend/app/database/session.py
        touch backend/app/database/base.py
        touch backend/app/core/config.py
        touch backend/app/core/security.py

        echo "✅ ساختار دایرکتوری‌ها و فایل‌های خالی ایجاد شد"
